<style>
</style>

Registry: <input id="registry" value="registry.hub.docker.com" />
<br />
Repository: <input id="repository" value="library/busybox" />
<br />
Username: <input id="username" />
<br />
Password: <input id="password" type="password" />
<br />
<button id="getTags">Go</button>
<br />
<div>
  Tags:
  <div id="tags"></div>
</div>
<div>
  Manifest:
  <pre id="manifest"></pre>
</div>

<script src="container.js"></script>
<script>
  function makeTagButtons(registry, repository, tags) {
    let html = '';
    for (let tag of tags) {
      html += '<button class="loadTag" registry="' + registry + '" repository="' + repository + '">' + tag + '</button>';
    }
    return html;
  }
  function registerTagButtons() {
    const tagButtons = document.getElementsByClassName('loadTag');
    for (let tagButton of tagButtons) {
      tagButton.onclick = () => {
        console.log(tagButton);
        const registry = tagButton.getAttribute('registry');
        const repository = tagButton.getAttribute('repository');
        const tag = tagButton.innerHTML;
        console.log('Clicked tag button: ' + registry + '/' + repository + '/' + tag);

        new Container.Repository(registry, repository)
          .Image(tag)
          .then(image => image.ManifestJSON)
          .then(manifestJson => {
            document.getElementById('manifest').innerHTML =
              JSON.stringify(manifestJson, null, 2);
          });
      };
    }
  }

  document.getElementById('getTags').onclick = function() {
    const registry = document.getElementById('registry').value;
    const repository = document.getElementById('repository').value;

    new Container.Repository(registry, repository)
      .Tags
      .then(tags => {
        console.log(tags);
        document.getElementById('tags').innerHTML = makeTagButtons(registry, repository, tags);
        registerTagButtons();
      });
  };
</script>